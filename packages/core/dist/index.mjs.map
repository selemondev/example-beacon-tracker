{"version":3,"sources":["../src/index.ts"],"sourcesContent":["// import { AnalyticsProps, SendEvent } from \"./types\";\r\n\r\n// export function track(props?: AnalyticsProps | undefined): void | undefined {\r\n//   if (typeof window === \"undefined\") {\r\n//     return;\r\n//   }\r\n\r\n//   let beacon = {\r\n//     before: (props?.before ? props.before : (event) => event) as SendEvent,\r\n//   };\r\n\r\n//   window.beacon = beacon;\r\n\r\n//   if (window.beacon.before({ pathname: window.location.pathname })) {\r\n//     return;\r\n//   }\r\n\r\n//   const scriptSrc = \"https://withbeacon.vercel.app/track.js\";\r\n\r\n//   if (document.head.querySelector(`script[src*=\"${scriptSrc}\"]`)) {\r\n//     return;\r\n//   }\r\n\r\n//   const script = document.createElement(\"script\");\r\n//   script.src = \"https://withbeacon.vercel.app/track.js\";\r\n//   script.defer = true;\r\n\r\n//   document.head.appendChild(script);\r\n// }\r\n\r\n// export * from \"./types\";\r\n\r\n\r\nimport { SendEvent, AnalyticsProps } from \"./types\";\r\n\r\nexport function track(props?: AnalyticsProps | undefined): void | undefined {\r\n  if (typeof window === \"undefined\") {\r\n    return;\r\n  }\r\n\r\n  const beacon: { before: SendEvent } = {\r\n    before: props && props.before ? props.before : ((event) => event),\r\n  };\r\n\r\n\r\n  window.beacon = beacon;\r\n\r\n  if (window.beacon && window.beacon.before && window.beacon.before({ pathname: window.location.pathname })) {\r\n    return;\r\n  }\r\n\r\n  const scriptSrc = \"https://withbeacon.vercel.app/track.js\";\r\n\r\n  if (document.head.querySelector(`script[src*=\"${scriptSrc}\"]`)) {\r\n    return;\r\n  }\r\n\r\n  const script = document.createElement(\"script\");\r\n  script.src = scriptSrc;\r\n  script.defer = true;\r\n\r\n  document.head.appendChild(script);\r\n}\r\n\r\nexport * from \"./types\";\r\n"],"mappings":";AAmCO,SAAS,MAAM,OAAsD;AAC1E,MAAI,OAAO,WAAW,aAAa;AACjC;AAAA,EACF;AAEA,QAAM,SAAgC;AAAA,IACpC,QAAQ,SAAS,MAAM,SAAS,MAAM,SAAU,CAAC,UAAU;AAAA,EAC7D;AAGA,SAAO,SAAS;AAEhB,MAAI,OAAO,UAAU,OAAO,OAAO,UAAU,OAAO,OAAO,OAAO,EAAE,UAAU,OAAO,SAAS,SAAS,CAAC,GAAG;AACzG;AAAA,EACF;AAEA,QAAM,YAAY;AAElB,MAAI,SAAS,KAAK,cAAc,gBAAgB,aAAa,GAAG;AAC9D;AAAA,EACF;AAEA,QAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,SAAO,MAAM;AACb,SAAO,QAAQ;AAEf,WAAS,KAAK,YAAY,MAAM;AAClC;","names":[]}